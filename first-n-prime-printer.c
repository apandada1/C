#include <stdio.h>
#include <stdlib.h>
#include <math.h>
int isPrime(int x, int *a, int n)
{
	for (int i = 0; a[i] < sqrt(x) + 1; ++i)
	{	
		if (x % a[i] == 0)
			return 0;
	}
	a[n] = x;
	return 1;
}

int main(int argc, char const *argv[])
{
	int *a;
	int total_num;
	if(argc == 1)
		total_num = 1000; //default
	else
		total_num = atoi(argv[1]);

	if(total_num == 0)
	{	printf("Exiting\n");
		return 0;
	}

	a = (int *) malloc(sizeof(int) * total_num);
	a[0] = 2;
	a[1] = 3;
	a[2] = 5;
	int prime = 7;
	int count = 3;

	while(count < total_num)
	{
		count += isPrime(prime, a, count);
		prime += 2;
		if (prime % 5 == 0)
		{
			prime += 2;
		}
	}

	for (int i = 0; i < total_num; ++i)
	{
		printf("%d %d\n",i+1, a[i]);
	}
	return 0;
}
	